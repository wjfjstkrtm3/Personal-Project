<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:security="http://www.springframework.org/schema/security"
	xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-4.1.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">


		

<security:http auto-config="true" use-expressions="true">

<!-- 
csrf토큰 비활성화 설정
해당 설정을 사용하기위해서는 위의 form-login이 필요하다 
-->
<security:csrf disabled="true"/>

	<security:form-login
		username-parameter="userId"
		password-parameter="userPwd"
		login-processing-url="/login"
		default-target-url="/board/main"
		login-page="/"
	/>


<!-- 로그아웃 설정 -->
<security:logout
	logout-success-url="/"
	logout-url="/logout"
/>

</security:http>


<!-- Mybatis와 연동 -->
<!-- 
users-by-username-query : 사용자를 인증하는 컬럼 

-->
  <security:jdbc-user-service data-source-ref="dataSource" id="userService"
	users-by-username-query="SELECT id as userId, password as userPwd, enabled FROM USER WHERE ID=?" 
	authorities-by-username-query="SELECT id as userId, authority FROM USER WHERE ID=?"
/>


<security:authentication-manager>
    <security:authentication-provider user-service-ref="userService">
    </security:authentication-provider>
</security:authentication-manager>






</beans>
